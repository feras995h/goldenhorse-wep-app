# ๐ ุชุนูููุงุช ูุดุฑ ุงูุฅุตูุงุญุงุช ููุณูุฑูุฑ ุงูููุดูุฑ

**ุงูุชุงุฑูุฎ**: 7 ุฃูุชูุจุฑ 2025  
**ุงูุณูุฑูุฑ ุงููุณุชูุฏู**: `web.goldenhorse-ly.com`

---

## โ ุงูุฅุตูุงุญุงุช ุงูุชู ุชูุช ูุญููุงู

### 1. ุชุญุฏูุซ Model ุงููุชุฑุฉ ุงููุญุงุณุจูุฉ โ
**ุงูููู**: `server/src/models/AccountingPeriod.js`

**ุงูุชุบููุฑุงุช**:
```javascript
// ูุจู:
year: DataTypes.INTEGER
month: DataTypes.INTEGER

// ุจุนุฏ:
name: DataTypes.STRING
fiscalYear: DataTypes.INTEGER
isCurrent: DataTypes.BOOLEAN
startDate: DataTypes.DATE
endDate: DataTypes.DATE
```

**Method ูุญุฏูุซ**:
```javascript
AccountingPeriod.getCurrentPeriod = async function() {
  // ุงูุขู ูุจุญุซ ุจู isCurrent: true
  const current = await this.findOne({
    where: { isCurrent: true }
  });
  
  if (current) return current;
  
  // fallback: ุงูุจุญุซ ุญุณุจ ุงูุชุงุฑูุฎ ุงูุญุงูู
  const now = new Date();
  return await this.findOne({
    where: {
      startDate: { [sequelize.Op.lte]: now },
      endDate: { [sequelize.Op.gte]: now },
      status: 'open'
    }
  });
}
```

### 2. ุฅูุดุงุก ุงููุชุฑุงุช ุงููุญุงุณุจูุฉ โ
- โ 12 ูุชุฑุฉ ูุณูุฉ 2025 ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุณุญุงุจูุฉ
- โ ุงููุชุฑุฉ ุงูุญุงููุฉ: ุฃูุชูุจุฑ 2025 (`isCurrent: true`)

### 3. ุฅูุดุงุก ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ โ
- โ 15 ุญุณุงุจ ูุญุงุณุจู
- โ ูุณุชุฎุฏู admin
- โ 5 ุฅุนุฏุงุฏุงุช
- โ ุฎุฑูุทุฉ ุญุณุงุจุงุช

---

## ๐ง ุฎุทูุงุช ุงููุดุฑ ููุณูุฑูุฑ ุงูููุดูุฑ

### ุงูุทุฑููุฉ 1: Git Push (ุงูุฃูุถู)

ุฅุฐุง ูุงู ุงูุณูุฑูุฑ ุงูููุดูุฑ ูุณุชุฎุฏู Git:

```bash
# 1. ุชุฃูุฏ ูู ุฃูู ูู ุงููุฌูุฏ ุงูุตุญูุญ
cd "C:\Users\dell\Desktop\ููุถููุงุชู\ูุฌูุฏ ุฌุฏูุฏ (2)"

# 2. Add ุงููููุงุช ุงููุนุฏูุฉ
git add server/src/models/AccountingPeriod.js

# 3. Commit
git commit -m "Fix AccountingPeriod model to match database schema"

# 4. Push
git push origin main
# ุฃู
git push origin master
```

**ุซู ุนูู ุงูุณูุฑูุฑ ุงูููุดูุฑ**:
```bash
# SSH ุฅูู ุงูุณูุฑูุฑ
ssh user@web.goldenhorse-ly.com

# ุงูุงูุชูุงู ุฅูู ูุฌูุฏ ุงููุดุฑูุน
cd /path/to/project

# Pull ุขุฎุฑ ุงูุชุนุฏููุงุช
git pull origin main

# ุฅุนุงุฏุฉ ุชุดุบูู ุงูุณูุฑูุฑ
pm2 restart all
# ุฃู
systemctl restart your-app-name
# ุฃู
npm restart
```

---

### ุงูุทุฑููุฉ 2: FTP/SFTP Upload

ุฅุฐุง ูุงู ุงููุตูู ุนุจุฑ FTP/SFTP:

1. **ุงูุชุญ ุจุฑูุงูุฌ FTP** (ูุซู FileZillaุ WinSCP)
2. **ุงุชุตู ุจู**: `web.goldenhorse-ly.com`
3. **ุงุฑูุน ุงูููู ุงููุนุฏู**:
   - ูู: `C:\Users\dell\Desktop\ููุถููุงุชู\ูุฌูุฏ ุฌุฏูุฏ (2)\server\src\models\AccountingPeriod.js`
   - ุฅูู: `/path/to/project/server/src/models/AccountingPeriod.js`
4. **ุฃุนุฏ ุชุดุบูู ุงูุณูุฑูุฑ** (ุนุจุฑ ููุญุฉ ุงูุชุญูู ุฃู SSH)

---

### ุงูุทุฑููุฉ 3: cPanel ุฃู ููุญุฉ ุชุญูู ุงูุงุณุชุถุงูุฉ

1. **ุณุฌูู ุฏุฎูู** ุฅูู ููุญุฉ ุชุญูู ุงูุงุณุชุถุงูุฉ
2. **ุงุฐูุจ ุฅูู File Manager**
3. **ุงุจุญุซ ุนู**: `server/src/models/AccountingPeriod.js`
4. **ุญุฑุฑ ุงูููู** ูุจุงุดุฑุฉ ุฃู ุงุฑูุน ุงููุณุฎุฉ ุงูุฌุฏูุฏุฉ
5. **ุฃุนุฏ ุชุดุบูู ุงูุชุทุจูู**

---

## โ๏ธ ููู ุฌุฏุงู: ุฅุนุงุฏุฉ ุชุดุบูู ุงูุณูุฑูุฑ

ุจุนุฏ ุฑูุน ุงููููุงุชุ **ูุฌุจ ุฅุนุงุฏุฉ ุชุดุบูู Node.js** ุนูู ุงูุณูุฑูุฑ ุงูููุดูุฑ:

```bash
# ุฅุฐุง ููุช ุชุณุชุฎุฏู PM2
pm2 restart all
pm2 logs  # ููุชุญูู ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก

# ุฅุฐุง ููุช ุชุณุชุฎุฏู systemd
sudo systemctl restart your-app-name

# ุฅุฐุง ููุช ุชุณุชุฎุฏู forever
forever restartall

# ุฅุฐุง ููุช ุชุณุชุฎุฏู npm
npm restart
```

---

## ๐งช ุงูุชุญูู ูู ูุฌุงุญ ุงููุดุฑ

ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุดุบููุ ุงุฎุชุจุฑ:

### 1. API ุงููุชุฑุฉ ุงููุญุงุณุจูุฉ
```bash
curl https://web.goldenhorse-ly.com/api/accounting-periods/current
```

**ูุฌุจ ุฃู ูุนูุฏ**:
```json
{
  "success": true,
  "data": {
    "id": "...",
    "name": "ุงููุชุฑุฉ ุงููุญุงุณุจูุฉ 2025-10",
    "fiscalYear": 2025,
    "status": "open",
    "isCurrent": true
  }
}
```

### 2. ูู ุงููุชุตูุญ
ุงูุชุญ: `https://web.goldenhorse-ly.com` ูุชุญูู ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก 500

---

## ๐ ูุงุฆูุฉ ุงูุชุญูู

- [ ] ูุณุฎ ุงูููู ุงููุนุฏู `AccountingPeriod.js` ุฅูู ุงูุณูุฑูุฑ
- [ ] ุฅุนุงุฏุฉ ุชุดุบูู Node.js ุนูู ุงูุณูุฑูุฑ
- [ ] ุงุฎุชุจุงุฑ `/api/accounting-periods/current`
- [ ] ุงุฎุชุจุงุฑ Dashboard ูู ุงููุชุตูุญ
- [ ] ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก 500

---

## ๐ ุฅุฐุง ูู ุชูุฌุญ

### ุงูุฎูุงุฑ 1: ุฃุฑุณู ูู ูุนูููุงุช ุงููุตูู
ุฅุฐุง ูุงู ูุฏูู SSH access:
```
Host: web.goldenhorse-ly.com
User: ุ
Password: ุ
Port: ุ
Project Path: ุ
```

### ุงูุฎูุงุฑ 2: ุงุญุตู ุนูู logs ูู ุงูุณูุฑูุฑ
```bash
# ุนูู ุงูุณูุฑูุฑ ุงูููุดูุฑ
pm2 logs
# ุฃู
tail -100 /path/to/logs/error.log
```

ุฃุฑุณู ูู ุงูู logs ูุฃุณุงุนุฏู ูู ูุนุฑูุฉ ุงููุดููุฉ.

---

## ๐ ููุงุญุธุงุช

### ุงูููู ุงููุนุฏู ููุท
ุงูููู ุงููุญูุฏ ุงูุฐู ุชู ุชุนุฏููู:
```
server/src/models/AccountingPeriod.js
```

### ูุงุนุฏุฉ ุงูุจูุงูุงุช
ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุณุญุงุจูุฉ (`72.60.92.146:5432`) **ุฌุงูุฒุฉ ููุง ุชุญุชุงุฌ ุชุนุฏูู**:
- โ ุงููุชุฑุงุช ููุฌูุฏุฉ
- โ ุงูุญุณุงุจุงุช ููุฌูุฏุฉ
- โ ุฌููุน ุงูุจูุงูุงุช ุฌุงูุฒุฉ

ุงููุดููุฉ **ููุท** ูู ููุฏ ุงูุณูุฑูุฑ ุงูููุดูุฑ ุงูุฐู ูุง ูุฒุงู ูุณุชุฎุฏู Model ูุฏูู.

---

## ๐ ุจุนุฏ ุงููุดุฑ

ุจูุฌุฑุฏ ูุดุฑ ุงูููู ุงููุนุฏู ูุฅุนุงุฏุฉ ุชุดุบูู ุงูุณูุฑูุฑ:
- โ `/api/accounting-periods/current` ุณูุนูู
- โ ุฌููุน endpoints ุงููุงููุฉ ุณุชุนูู
- โ Dashboard ุณูุธูุฑ ุจุฏูู ุฃุฎุทุงุก
- โ ุงููุธุงู ุฌุงูุฒ 100%

---

**ูู ุชุญุชุงุฌ ูุณุงุนุฏุฉ ูู ุฃู ูู ูุฐู ุงูุฎุทูุงุชุ** ๐ค

