# ๐ง ุฏููู ุงุณุชุนุงุฏุฉ ุงูุญุณุงุจุงุช ูู PostgreSQL

## ๐จ **ุงููุดููุฉ:**
- ุงูุญุณุงุจุงุช ููููุฏุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช PostgreSQL ุงูุฅูุชุงุฌ
- ูุง ูููู ุฅุถุงูุฉ ุญุณุงุจุงุช ุฌุฏูุฏุฉ
- ุงูุชูุงุฑูุฑ ุงููุงููุฉ ูุง ุชุนูู

## โ **ุงูุญู: ุชุดุบูู ุณูุฑูุจุช ุงุณุชุนุงุฏุฉ ุงูุญุณุงุจุงุช**

### **ุงูุทุฑููุฉ ุงูุฃููู: ุชุดุบูู ุงูุณูุฑูุจุช ูุญููุงู**

#### **1. ุฅุนุฏุงุฏ ููู ุงูุจูุฆุฉ:**
```bash
# ุงูุณุฎ ููู ุงููุซุงู
cp .env.production.example .env

# ุนุฏู ุงูููู ูุฃุฏุฎู ุจูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุตุญูุญุฉ
nano .env
```

#### **2. ุฃุฏุฎู ุฑุงุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู `.env`:**
```env
DATABASE_URL=postgresql://username:password@host:port/database_name
```

**ูุซุงู:**
```env
DATABASE_URL=postgresql://goldenhorse_user:mypassword@postgres.coolify.io:5432/goldenhorse_db
```

#### **3. ุชุดุบูู ุงูุณูุฑูุจุช:**
```bash
node restore-postgres-accounts.js
```

### **ุงูุทุฑููุฉ ุงูุซุงููุฉ: ุชุดุบูู ุงูุณูุฑูุจุช ุนูู ุงูุฎุงุฏู**

#### **1. ุฑูุน ุงูุณูุฑูุจุช ููุฎุงุฏู:**
```bash
# ุฑูุน ุงูููู ุนุจุฑ SCP ุฃู FTP
scp restore-postgres-accounts.js user@server:/path/to/app/
```

#### **2. ุชุดุบูู ุงูุณูุฑูุจุช ุนูู ุงูุฎุงุฏู:**
```bash
# ุงูุงุชุตุงู ุจุงูุฎุงุฏู
ssh user@server

# ุงูุงูุชูุงู ููุฌูุฏ ุงูุชุทุจูู
cd /path/to/app/

# ุชุดุบูู ุงูุณูุฑูุจุช
node restore-postgres-accounts.js
```

### **ุงูุทุฑููุฉ ุงูุซุงูุซุฉ: ุงุณุชุฎุฏุงู Coolify Terminal**

#### **1. ุงูุชุญ Coolify Dashboard**
#### **2. ุงูุชูู ุฅูู ุงูุชุทุจูู**
#### **3. ุงูุชุญ Terminal**
#### **4. ุดุบู ุงูุณูุฑูุจุช:**
```bash
node restore-postgres-accounts.js
```

## ๐ **ุงูุญุตูู ุนูู ุฑุงุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู Coolify:**

### **ุงูุฎุทูุงุช:**
1. **ุงุฏุฎู ุฅูู Coolify Dashboard**
2. **ุงูุชูู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช PostgreSQL**
3. **ุงููุฑ ุนูู "Configuration" ุฃู "Settings"**
4. **ุงุจุญุซ ุนู "Connection String" ุฃู "Database URL"**
5. **ุงูุณุฎ ุงูุฑุงุจุท ุงููุงูู**

### **ุดูู ุงูุฑุงุจุท:**
```
postgresql://username:password@host:port/database_name
```

### **ูุซุงู ุนูู ุงูุฑุงุจุท:**
```
postgresql://goldenhorse_user:abc123@db.coolify.io:5432/goldenhorse_production
```

## ๐ **ุงููุชุงุฆุฌ ุงููุชููุนุฉ:**

### **ุนูุฏ ุชุดุบูู ุงูุณูุฑูุจุช ุจูุฌุงุญ:**
```
๐ ุจุฏุก ุงุณุชุนุงุฏุฉ ุฏููู ุงูุญุณุงุจุงุช ูู PostgreSQL...
๐ ุงูุงุชุตุงู ุจู PostgreSQL...
โ ุชู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช PostgreSQL ุจูุฌุงุญ
๐ ุนุฏุฏ ุงูุญุณุงุจุงุช ุงูููุฌูุฏุฉ ุญุงููุงู: 13
๐ ุณูุชู ุฅุถุงูุฉ ุงูุญุณุงุจุงุช ุงูููููุฏุฉ...
โ ุชู ุฅูุดุงุก ุงูุญุณุงุจ: 1.1.1 - ุงูููุฏูุฉ ูุงูุจููู
โ ุชู ุฅูุดุงุก ุงูุญุณุงุจ: 1.1.1.1 - ุงูุตูุฏูู
...
๐ ููุฎุต ุงูุนูููุฉ:
  - ุงูุญุณุงุจุงุช ุงูููุฌูุฏุฉ ูุณุจูุงู: 13
  - ุงูุญุณุงุจุงุช ุงููุถุงูุฉ: 34
  - ุงูุฃุฎุทุงุก: 0
  - ุงูุนุฏุฏ ุงูููุงุฆู ููุญุณุงุจุงุช: 47
๐ ุชู ุฅุถุงูุฉ 34 ุญุณุงุจ ุฌุฏูุฏ ุจูุฌุงุญ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช PostgreSQL!
```

## โ **ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ:**

### **1. ุฎุทุฃ "DATABASE_URL ุบูุฑ ููุฌูุฏ":**
```bash
โ DATABASE_URL ุบูุฑ ููุฌูุฏ ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
```
**ุงูุญู:** ุชุฃูุฏ ูู ูุฌูุฏ ููู `.env` ูุน `DATABASE_URL` ุงูุตุญูุญ

### **2. ุฎุทุฃ ุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช:**
```bash
โ ุฎุทุฃ ูู ุงุณุชุนุงุฏุฉ ุงูุญุณุงุจุงุช: connection refused
```
**ุงูุญู:** 
- ุชุญูู ูู ุตุญุฉ ุฑุงุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุชุฃูุฏ ูู ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุนูู
- ุชุญูู ูู ุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ ูุงูุฌุฏุงุฑ ุงููุงุฑู

### **3. ุฎุทุฃ SSL:**
```bash
โ SSL connection required
```
**ุงูุญู:** ุงูุณูุฑูุจุช ูุชุนุงูู ูุน SSL ุชููุงุฆูุงูุ ููู ุชุฃูุฏ ูู ุฃู ุงูุฎุงุฏู ูุฏุนู SSL

## ๐ฏ **ุจุนุฏ ูุฌุงุญ ุงูุนูููุฉ:**

### **1. ุชุญูู ูู ุงููุชุงุฆุฌ:**
```sql
-- ุนุฏุฏ ุงูุญุณุงุจุงุช ุงูุฅุฌูุงูู
SELECT COUNT(*) FROM accounts;

-- ุนุฑุถ ุงูุญุณุงุจุงุช ุงูุฑุฆูุณูุฉ
SELECT code, name, type FROM accounts WHERE "parentCode" IS NULL ORDER BY code;
```

### **2. ุงุฎุชุจุฑ ุฅุถุงูุฉ ุญุณุงุจ ุฌุฏูุฏ:**
- ุงุฏุฎู ุฅูู ุฏููู ุงูุญุณุงุจุงุช ูู ุงูุชุทุจูู
- ุฌุฑุจ ุฅุถุงูุฉ ุญุณุงุจ ุฌุฏูุฏ
- ูุฌุจ ุฃู ูุนูู ุจุฏูู ุฎุทุฃ 500

### **3. ุชุญูู ูู ุงูุชูุงุฑูุฑ:**
- ุงูุชูุงุฑูุฑ ุงููุงููุฉ
- ุงูุชูุงุฑูุฑ ุงูููุฑูุฉ
- ูุดู ุงูุญุณุงุจ

## ๐ **ุงูุฃูุงู:**

- **ุงูุณูุฑูุจุช ุขูู:** ูุณุชุฎุฏู `ON CONFLICT DO NOTHING` ูุชุฌูุจ ุงูุชูุฑุงุฑ
- **ูุง ูุญุฐู ุจูุงูุงุช:** ูุถูู ููุท ุงูุญุณุงุจุงุช ุงูููููุฏุฉ
- **ูุญุงูุธ ุนูู ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ:** ูุง ูุนุฏู ุงูุญุณุงุจุงุช ุงูููุฌูุฏุฉ

## ๐ **ุงูุฏุนู:**

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:
1. **ุชุญูู ูู ุณุฌูุงุช ุงูุฃุฎุทุงุก**
2. **ุชุฃูุฏ ูู ุตุญุฉ ุฑุงุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช**
3. **ุชุญูู ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**

**๐ ุจุนุฏ ุชุดุบูู ุงูุณูุฑูุจุช ุจูุฌุงุญุ ุณุชุนูุฏ ุฌููุน ูุธุงุฆู ุงููุธุงู ุงููุงูู ููุนูู ุงูุทุจูุนู!**
